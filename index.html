<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Portal Administrativo - GM</title>
<style>
body{font-family:'Segoe UI',sans-serif;background:linear-gradient(135deg,#1e3c72,#2a5298);margin:0;padding:0;}
.container{max-width:600px;margin:40px auto;background:white;padding:25px;border-radius:12px;box-shadow:0 4px 10px rgba(0,0,0,0.3);}
h1{text-align:center;color:#1e3c72;}
label{display:block;margin-top:10px;}
input,textarea,select{width:100%;padding:10px;margin-top:5px;border-radius:6px;border:1px solid #ccc;}
button{background:#1e3c72;color:white;padding:12px 20px;border:none;border-radius:6px;margin-top:15px;cursor:pointer;}
.item{background:#f0f4ff;padding:10px;border-radius:6px;margin:10px 0;}
</style>
</head>
<body>
<div class="container">
<h1>üõ°Ô∏è Portal GM</h1>

<form id="formComunicado">
<label>T√≠tulo</label>
<input type="text" id="titulo" required>
<label>Conte√∫do</label>
<textarea id="conteudo" required></textarea>
<button type="submit">üì¢ Publicar comunicado</button>
</form>

<h2>üìã Comunicados</h2>
<div id="listaComunicados"></div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js"></script>
<script>
const firebaseConfig = SEU_FIREBASE_CONFIG;
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();
</script>

<!-- EmailJS -->
<script src="https://cdn.emailjs.com/dist/email.min.js"></script>
<script>
emailjs.init("SEU_PUBLIC_KEY_EMAILJS");
</script>

<script>
// Salvar comunicado no Firebase e enviar email
const form = document.getElementById("formComunicado");
const lista = document.getElementById("listaComunicados");

form.addEventListener("submit", async e => {
  e.preventDefault();
  const titulo = document.getElementById("titulo").value;
  const conteudo = document.getElementById("conteudo").value;
  const data = new Date().toLocaleString("pt-BR");

  // Salva no banco
  await db.collection("comunicados").add({titulo, conteudo, data});
  form.reset();

  // Envia email
  emailjs.send("SEU_SERVICE_ID", "SEU_TEMPLATE_ID", {
    title: titulo,
    message: conteudo
  });

  alert("‚úÖ Comunicado publicado e e-mails enviados!");
});

// Carregar comunicados
db.collection("comunicados").orderBy("data", "desc").onSnapshot(snapshot=>{
  lista.innerHTML = "";
  snapshot.forEach(doc=>{
    const c = doc.data();
    lista.innerHTML += `<div class='item'><b>${c.titulo}</b><br>${c.conteudo}<br><small>${c.data}</small></div>`;
  });
});
</script>
</body>
</html>
